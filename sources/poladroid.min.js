/**
 * Poladroid 0.1.1
 */
!function(){var t=function(t,i,h){return new e(t,i,h)},e=function(t,e,i){var i=i,t=t,h=e.width,a=e.height,n=e.quality,r=null,d=null,l=null,o=function(t){var e=new Image;e.onload=function(){var d=e.width/e.height;(6==t||"6"==t||8==t||"8"==t)&&(d=1/d);var l=document.createElement("canvas"),o=l.getContext("2d");if(d>=1?(l.width=h,e.width<h?l.height=a:l.height=Math.round(a/d)):(e.height<a?l.width=h:l.width=Math.round(h*d),l.height=a),6==t||"6"==t){var w=l.width;l.width=l.height,l.height=w,o.translate(.5*l.height,.5*l.width),o.rotate(Math.PI/2),o.translate(.5*-l.height,.5*-l.width),o.drawImage(e,0,0,l.height,l.width)}else if(8==t||"8"==t){var w=l.width;l.width=l.height,l.height=w,o.translate(.5*l.height,.5*l.width),o.rotate(-Math.PI/2),o.translate(.5*-l.height,.5*-l.width),o.drawImage(e,0,0,l.height,l.width)}else 3==t||"3"==t?(o.translate(.5*l.width,.5*l.height),o.rotate(Math.PI),o.translate(.5*-l.width,.5*-l.height),o.drawImage(e,0,0,l.width,l.height)):o.drawImage(e,0,0,l.width,l.height);r=l.toDataURL("image/jpeg",Math.round(100*n)/1e4),null!=i&&i(r)},e.src=r};return document.getElementById(t).addEventListener("click",function(){null!=l&&(l.remove(),l=null),l=document.createElement("input"),l.setAttribute("type","file"),l.addEventListener("change",function(t){var e=t.target.files;if(e&&e.length>0&&(d=e[0]),null!=d){var i=new FileReader;i.onload=function(t){r=t.target.result,window.EXIF?EXIF.getData(d,function(){var t=1;this.hasOwnProperty("exifdata")&&this.exifdata.hasOwnProperty("Orientation")&&(t=this.exifdata.Orientation),o(t)}):o(1)},i.readAsDataURL(d)}this.remove()},!0),l.click()}),this};window.Poladroid||(window.Poladroid=t)}();